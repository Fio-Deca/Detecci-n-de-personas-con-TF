# -*- coding: utf-8 -*-
"""Distribución dataset.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1TsaZeaEPcMOfL_GGTo3-vLVA63vyVlqL
"""

#Importamos las librerías necesarias para descomprimir el .zip
import os 
import zipfile
#Descomprimimos el dataset que estará en formato .zip
local_zip = "Dataset-personas.zip" 
zip_ref = zipfile.ZipFile(local_zip, "r")
zip_ref.extractall("dataset")
zip_ref.close()

#Después de descomprimir el archivo guardamos la ruta de la carpeta que contine las imagenes
path="dataset/human detection dataset/1"
content = os.listdir(path)

#Creamos las carpetas donde se situaran las carpetas del dataset
path_general = "dataset_personas_filtrado"
path_train ="{}/train".format(path_general)
path_test ="{}/test".format(path_general)

os.mkdir(path_general)
os.mkdir(path_train)
os.mkdir(path_test)

import random
import shutil
#dividiremos el dataset en 70-30
train = 0.7
#Bucle For para repartir las imágenes 
for nCount in range(int(len(content)*train)):
  random_choice_img = random.choice(content)
  random_choice_img_abs = "{}/{}".format(path,random_choice_img)
  target_img = "{}/{}".format(path_train,random_choice_img)
  shutil.copyfile(random_choice_img_abs,target_img)
  content.remove(random_choice_img)

for img in content:
  random_choice_img_abs = "{}/{}".format(path,img)
  target_img = "{}/{}".format(path_test,img)
  shutil.copyfile(random_choice_img_abs,target_img)

#comprimimos la carpeta para poder descargarla 
!zip -r /content/dataset_personas_filtrado.zip /content/dataset_personas_filtrado

